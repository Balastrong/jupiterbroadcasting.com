<div class="container">
  <iframe
    id="pv-embed-player"
    scrolling="no"
    src="https://podverse.fm/embed/player?podcastId={{ print .CurrentSection.Params.podverse_podcast_id }}&episodeGuid={{ print .Params.episode_guid}}&episodeMediaUrl={{ .Params.podcast_file }}&episodeTitle={{ .Params.Title }}&episodePubDate={{ .Date.Unix }}&showALlEpisodes=true"
  >
  </iframe>
</div>

<script>
  // JupiterBroadcasting Branding colors:
  const JBColorsRGB = {
    // jb-brand, linux-unplugged, coder-radio
    blueCloud: '#6ecff5',       
    // jb-brand, linux-unplugged
    blueBold: '#0070bd',
    // jb-brand
    grayDark: '#2a2a2a',        
    // jb-brand
    grayCool: '#6a6a6a',  
    // jupiter-extras      
    graySubtle: '#cccccc',
    // coder-radio, linux-action-news, user-error
    redError: '#d9001a',
    // bsd-now, linux-headlines
    orangeBlowfish: '#f5b821',
    // choose-linux
    greenConsole: '#00d900',   
    // self-hosted
    orangeRedLeicester: '#ed7026',
    // tech-snap
    violetVdev: '#d417a3'
  };

  /**
  * See sample code:
  *    https://github.com/podverse/podverse-web/blob/master/pages/embed/player-demo-custom-css.tsx
  * Demo:
  *    https://podverse.fm/embed/player-demo-custom-css
  **/
  let pvEmbedHasLoadedListener;

  function pvHandleCSSOverrides(e) {
    const key = e.message ? 'message' : 'data';
    const data = e[key];

    if (data != 'pv-embed-has-loaded') {
      return;
    }

    if (pvEmbedHasLoadedListener) {
      window.removeEventListener(pvEmbedHasLoadedListener);
      pvEmbedHasLoadedListener = undefined;
    }

    const pvFrameNode = document.querySelector('#pv-embed-player');
    if (!pvFrameNode) {
      return;
    }


    const messageBody = {
      eventName: 'pv-embed-load-custom-css',
      styleRules: {
        '--pv-embed-background-color': JBColorsRGB.grayDark,
        '--pv-embed-border-color': JBColorsRGB.grayCool + '40', // 0x40 alpha = 25%
        '--pv-embed-divider-color': 'green',
        '--pv-embed-font-family': 'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif',
        '--pv-embed-text-color-primary': '#fff',
        '--pv-embed-text-color-secondary': JBColorsRGB.blueCloud,
        '--pv-embed-text-color-tertiary': JBColorsRGB.graySubtle,
        '--pv-embed-play-button-background-color': JBColorsRGB.blueBold,
        '--pv-embed-play-button-border-color': JBColorsRGB.blueCloud,
        '--pv-embed-play-button-icon-color': '#fff',
        '--pv-embed-slider-background-color': JBColorsRGB.blueBold + '80', // 0x80 alpha = 50%
        '--pv-embed-slider-fill-color': '#fff',
        '--pv-embed-slider-marker-color': JBColorsRGB.blueCloud,
        '--pv-embed-slider-highlight-color': JBColorsRGB.blueCloud + '40', // 0x40 alpha = 25%
      },
    };

    pvFrameNode.contentWindow.postMessage(messageBody, 'https://podverse.fm');
  }

  pvEmbedHasLoadedListener = window.addEventListener(
    'message',
    pvHandleCSSOverrides
  );
</script>
